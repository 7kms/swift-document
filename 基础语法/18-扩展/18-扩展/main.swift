//
//  main.swift
//  18-æ‰©å±•
//
//  Created by tangl on 2019/11/22  11:01 AM
//  Copyright Â© 2019 km7. All rights reserved.
//
//  ---------------------------------------------------------
//  ğŸ˜ƒ  https://github.com/7kms
//  çƒ­çˆ±ç”Ÿæ´», å‹¤äºæ€è€ƒ, åŠªåŠ›å­¦ä¹ 
//  ---------------------------------------------------------
//

import Foundation
/**
 æ‰©å±• å°±æ˜¯ä¸ºä¸€ä¸ªå·²æœ‰çš„ç±»ã€ç»“æ„ä½“ã€æšä¸¾ç±»å‹æˆ–è€…åè®®ç±»å‹æ·»åŠ æ–°åŠŸèƒ½ã€‚è¿™åŒ…æ‹¬åœ¨æ²¡æœ‰æƒé™è·å–åŸå§‹æºä»£ç çš„æƒ…å†µä¸‹æ‰©å±•ç±»å‹çš„èƒ½åŠ›ï¼ˆå³ é€†å‘å»ºæ¨¡ ï¼‰ã€‚
 æ‰©å±•å’Œ Objective-C ä¸­çš„åˆ†ç±»ç±»ä¼¼ã€‚ï¼ˆä¸ Objective-C ä¸åŒçš„æ˜¯ï¼ŒSwift çš„æ‰©å±•æ²¡æœ‰åå­—ã€‚ï¼‰
 
 Swift ä¸­çš„æ‰©å±•å¯ä»¥ï¼š
 æ·»åŠ è®¡ç®—å‹å±æ€§å’Œè®¡ç®—å‹ç±»å‹å±æ€§
 å®šä¹‰å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•
 æä¾›æ–°çš„æ„é€ å™¨
 å®šä¹‰ä¸‹æ ‡
 å®šä¹‰å’Œä½¿ç”¨æ–°çš„åµŒå¥—ç±»å‹
 ä½¿ä¸€ä¸ªå·²æœ‰ç±»å‹ç¬¦åˆæŸä¸ªåè®®
 
 æ³¨: æ‰©å±•å¯ä»¥ä¸ºä¸€ä¸ªç±»å‹æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™å·²æœ‰çš„åŠŸèƒ½ã€‚
 */


//1. æ‰©å±•è¯­æ³•
/**
 ä½¿ç”¨å…³é”®å­—extensionæ¥å£°æ˜æ‰©å±•
 
 extension SomeType {
     // ä¸º SomeType æ·»åŠ çš„æ–°åŠŸèƒ½å†™åˆ°è¿™é‡Œ
 }
 
 æ‰©å±•ä¸€ä¸ªå·²æœ‰ç±»å‹ï¼Œä½¿å…¶é‡‡çº³ä¸€ä¸ªæˆ–å¤šä¸ªåè®®. æ— è®ºæ˜¯ç±»è¿˜æ˜¯ç»“æ„ä½“ï¼Œåè®®åå­—çš„ä¹¦å†™æ–¹å¼å®Œå…¨ä¸€æ ·ï¼š
 extension SomeType: SomeProtocol, AnotherProtocol {
    // åè®®å®ç°å†™åˆ°è¿™é‡Œ
 }
 æ³¨: å¦‚æœä½ é€šè¿‡æ‰©å±•ä¸ºä¸€ä¸ªå·²æœ‰ç±»å‹æ·»åŠ æ–°åŠŸèƒ½ï¼Œé‚£ä¹ˆæ–°åŠŸèƒ½å¯¹è¯¥ç±»å‹çš„æ‰€æœ‰å·²æœ‰å®ä¾‹éƒ½æ˜¯å¯ç”¨çš„ï¼Œå³ä½¿å®ƒä»¬æ˜¯åœ¨è¿™ä¸ªæ‰©å±•å®šä¹‰ä¹‹å‰åˆ›å»ºçš„ã€‚
 */
//2. è®¡ç®—å‹å±æ€§
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»å‹æ·»åŠ è®¡ç®—å‹å®ä¾‹å±æ€§å’Œè®¡ç®—å‹ç±»å‹å±æ€§
 */
extension Double {
    var km: Double { return self * 1_000.0 } // è¿™äº›å±æ€§æ˜¯åªè¯»çš„è®¡ç®—å‹å±æ€§ï¼Œä¸ºäº†æ›´ç®€æ´ï¼Œçœç•¥äº† get å…³é”®å­—ã€‚
    var m : Double { return self }
    var cm: Double { return self / 100.0 }
    var mm: Double { return self / 1_000.0 }
    var ft: Double { return self / 3.28084 }
}
let oneInch = 25.4.mm
print("One inch is \(oneInch) meters")
let threeFeet = 3.ft
print("Three feet is \(threeFeet) meters")
let aMarathon = 42.km + 195.m
print("A marathon is \(aMarathon) meters long")
/**
 æ³¨: æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„è®¡ç®—å‹å±æ€§ï¼Œä½†æ˜¯ä¸å¯ä»¥æ·»åŠ å­˜å‚¨å‹å±æ€§ï¼Œä¹Ÿä¸å¯ä»¥ä¸ºå·²æœ‰å±æ€§æ·»åŠ å±æ€§è§‚å¯Ÿå™¨ã€‚
 */
//3. æ„é€ å™¨
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»å‹æ·»åŠ æ–°çš„æ„é€ å™¨
 æ‰©å±•èƒ½ä¸ºç±»æ·»åŠ æ–°çš„ä¾¿åˆ©æ„é€ å™¨ï¼Œä½†æ˜¯å®ƒä»¬ä¸èƒ½ä¸ºç±»æ·»åŠ æ–°çš„æŒ‡å®šæ„é€ å™¨æˆ–ææ„å™¨ã€‚æŒ‡å®šæ„é€ å™¨å’Œææ„å™¨å¿…é¡»æ€»æ˜¯ç”±åŸå§‹çš„ç±»å®ç°æ¥æä¾›ã€‚
 
 æ³¨: å¦‚æœä½ ä½¿ç”¨æ‰©å±•ä¸ºä¸€ä¸ªå€¼ç±»å‹æ·»åŠ æ„é€ å™¨ï¼ŒåŒæ—¶è¯¥å€¼ç±»å‹çš„åŸå§‹å®ç°ä¸­æœªå®šä¹‰ä»»ä½•å®šåˆ¶çš„æ„é€ å™¨ä¸”æ‰€æœ‰å­˜å‚¨å±æ€§æä¾›äº†é»˜è®¤å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨æ‰©å±•ä¸­çš„æ„é€ å™¨é‡Œè°ƒç”¨é»˜è®¤æ„é€ å™¨å’Œé€ä¸€æˆå‘˜æ„é€ å™¨ã€‚ æ­£å¦‚åœ¨å€¼ç±»å‹çš„æ„é€ å™¨ä»£ç†ä¸­æè¿°çš„ï¼Œå¦‚æœä½ æŠŠå®šåˆ¶çš„æ„é€ å™¨å†™åœ¨å€¼ç±»å‹çš„åŸå§‹å®ç°ä¸­ï¼Œä¸Šè¿°è§„åˆ™å°†ä¸å†é€‚ç”¨ã€‚
 */
struct Size {
    var width = 0.0, height = 0.0
}
struct Point {
    var x = 0.0, y = 0.0
}
/**
 å› ä¸ºç»“æ„ä½“ Rect æœªæä¾›å®šåˆ¶çš„æ„é€ å™¨ï¼Œå› æ­¤å®ƒä¼šè·å¾—ä¸€ä¸ªé€ä¸€æˆå‘˜æ„é€ å™¨ã€‚
 åˆå› ä¸ºå®ƒä¸ºæ‰€æœ‰å­˜å‚¨å‹å±æ€§æä¾›äº†é»˜è®¤å€¼ï¼Œå®ƒåˆä¼šè·å¾—ä¸€ä¸ªé»˜è®¤æ„é€ å™¨ã€‚
 */
struct Rect {
    var origin = Point()
    var size = Size()
}
let defaultRect = Rect()
let memberwiseRect = Rect(origin: Point(x: 2.0, y: 2.0), size: Size(width: 5.0, height: 5.0))

// å¯ä»¥æä¾›ä¸€ä¸ªé¢å¤–çš„æ¥å—æŒ‡å®šä¸­å¿ƒç‚¹å’Œå¤§å°çš„æ„é€ å™¨æ¥æ‰©å±• Rect ç»“æ„ä½“
extension Rect {
    init(center: Point, size: Size) {
        let originX = center.x - size.width/2
        let originY = center.y - size.height/2
        self.init(origin: Point(x:originX, y:originY), size: size)
    }
}
let centerRect = Rect(center: Point(x: 4.0, y: 4.0), size: Size(width: 3.0, height: 3.0))

//4. æ–¹æ³•
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»å‹æ·»åŠ æ–°çš„å®ä¾‹æ–¹æ³•å’Œç±»å‹æ–¹æ³•ã€‚
 */

// Int ç±»å‹æ·»åŠ äº†ä¸€ä¸ªåä¸º repetitions çš„å®ä¾‹æ–¹æ³•
extension Int {
    func repetitions(task: ()->Void) {
        for _ in 0 ..< self {
            task()
        }
    }
}
3.repetitions {
    print("hello")
}

//4.1 å¯å˜å®ä¾‹æ–¹æ³•
/**
 é€šè¿‡æ‰©å±•æ·»åŠ çš„å®ä¾‹æ–¹æ³•ä¹Ÿå¯ä»¥ä¿®æ”¹è¯¥å®ä¾‹æœ¬èº«
 
 ç»“æ„ä½“å’Œæšä¸¾ç±»å‹ä¸­ä¿®æ”¹ self æˆ–å…¶å±æ€§çš„æ–¹æ³•å¿…é¡»å°†è¯¥å®ä¾‹æ–¹æ³•æ ‡æ³¨ä¸º mutatingï¼Œæ­£å¦‚æ¥è‡ªåŸå§‹å®ç°çš„å¯å˜æ–¹æ³•ä¸€æ ·ã€‚
 */
extension Int {
    
    mutating func square() {
        self = self * self
    }
}

var someInt = 3
someInt.square()
print(someInt)

//5. ä¸‹æ ‡
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»å‹æ·»åŠ æ–°ä¸‹æ ‡ã€‚
 */


/**
 ä¸º Swift å†…å»ºç±»å‹ Int æ·»åŠ äº†ä¸€ä¸ªæ•´å‹ä¸‹æ ‡ã€‚è¯¥ä¸‹æ ‡ [n] è¿”å›åè¿›åˆ¶æ•°å­—ä»å³å‘å·¦æ•°çš„ç¬¬ n ä¸ªæ•°å­—ï¼š
 
 123456789[0] è¿”å› 9
 123456789[1] è¿”å› 8
 */
extension Int {
    subscript (digitIndex: Int) -> Int {
        var decimalBase = 1
        for _ in 0..<digitIndex{
            decimalBase *= 10
        }
        return (self / decimalBase) % 10
    }
}

print(746381295[0])
print(746381295[1])
print(746381295[2])
print(746381295[8])
//å¦‚æœè¶…å‡ºèŒƒå›´, æ ¹æ®subscriptçš„å®ç°, ä¼šè¿”å›0
print(746381295[10])


//6. åµŒå¥—ç±»å‹
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰çš„ç±»ã€ç»“æ„ä½“å’Œæšä¸¾æ·»åŠ æ–°çš„åµŒå¥—ç±»å‹ï¼š
 */
extension Int {
    // Kind çš„æšä¸¾è¡¨ç¤ºç‰¹å®šæ•´æ•°çš„ç±»å‹
    enum Kind {
        case negative, zero, positive
    }
    
    //è®¡ç®—å‹å®ä¾‹å±æ€§kindï¼Œç”¨æ¥æ ¹æ®æ•´æ•°è¿”å›é€‚å½“çš„ Kind æšä¸¾æˆå‘˜
    var kind: Kind{
        switch self {
        case 0:
            return .zero
        case let x where x > 0:
            return .positive
        default:
            return .negative
        }
    }
}

func printIntegerKinds(_ numbers: Array<Int>) {
    for number in numbers {
        switch number.kind {
        case .negative:
             print("- ", terminator: "")
        case .positive:
            print("+ ", terminator: "")
        case .zero:
             print("0 ", terminator: "")
        }
    }
    print("")
}
/**
 æ³¨: ç”±äºå·²çŸ¥ number.kind æ˜¯ Int.Kind ç±»å‹. æ‰€ä»¥Int.Kind ä¸­çš„æ‰€æœ‰æˆå‘˜å€¼éƒ½å¯ä»¥ä½¿ç”¨ç®€å†™å½¢å¼ï¼Œä¾‹å¦‚ä½¿ç”¨ .negative è€Œä¸æ˜¯ Int.Kind.negative
 */
printIntegerKinds([3, 19, -27, 0, -6, 0, 7])
