//
//  main.swift
//  18-æ‰©å±•
//
//  Created by tangl on 2019/11/22  11:01 AM
//  Copyright Â© 2019 km7. All rights reserved.
//
//  ---------------------------------------------------------
//  ðŸ˜ƒ  https://github.com/7kms
//  çƒ­çˆ±ç”Ÿæ´», å‹¤äºŽæ€è€ƒ, åŠªåŠ›å­¦ä¹ 
//  ---------------------------------------------------------
//

import Foundation
/**
 æ‰©å±• å°±æ˜¯ä¸ºä¸€ä¸ªå·²æœ‰çš„ç±»ã€ç»“æž„ä½“ã€æžšä¸¾ç±»åž‹æˆ–è€…åè®®ç±»åž‹æ·»åŠ æ–°åŠŸèƒ½ã€‚è¿™åŒ…æ‹¬åœ¨æ²¡æœ‰æƒé™èŽ·å–åŽŸå§‹æºä»£ç çš„æƒ…å†µä¸‹æ‰©å±•ç±»åž‹çš„èƒ½åŠ›ï¼ˆå³ é€†å‘å»ºæ¨¡ ï¼‰ã€‚
 æ‰©å±•å’Œ Objective-C ä¸­çš„åˆ†ç±»ç±»ä¼¼ã€‚ï¼ˆä¸Ž Objective-C ä¸åŒçš„æ˜¯ï¼ŒSwift çš„æ‰©å±•æ²¡æœ‰åå­—ã€‚ï¼‰
 
 Swift ä¸­çš„æ‰©å±•å¯ä»¥ï¼š
 æ·»åŠ è®¡ç®—åž‹å±žæ€§å’Œè®¡ç®—åž‹ç±»åž‹å±žæ€§
 å®šä¹‰å®žä¾‹æ–¹æ³•å’Œç±»åž‹æ–¹æ³•
 æä¾›æ–°çš„æž„é€ å™¨
 å®šä¹‰ä¸‹æ ‡
 å®šä¹‰å’Œä½¿ç”¨æ–°çš„åµŒå¥—ç±»åž‹
 ä½¿ä¸€ä¸ªå·²æœ‰ç±»åž‹ç¬¦åˆæŸä¸ªåè®®
 
 æ³¨: æ‰©å±•å¯ä»¥ä¸ºä¸€ä¸ªç±»åž‹æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½é‡å†™å·²æœ‰çš„åŠŸèƒ½ã€‚
 */


//1. æ‰©å±•è¯­æ³•
/**
 ä½¿ç”¨å…³é”®å­—extensionæ¥å£°æ˜Žæ‰©å±•
 
 extension SomeType {
     // ä¸º SomeType æ·»åŠ çš„æ–°åŠŸèƒ½å†™åˆ°è¿™é‡Œ
 }
 
 æ‰©å±•ä¸€ä¸ªå·²æœ‰ç±»åž‹ï¼Œä½¿å…¶é‡‡çº³ä¸€ä¸ªæˆ–å¤šä¸ªåè®®. æ— è®ºæ˜¯ç±»è¿˜æ˜¯ç»“æž„ä½“ï¼Œåè®®åå­—çš„ä¹¦å†™æ–¹å¼å®Œå…¨ä¸€æ ·ï¼š
 extension SomeType: SomeProtocol, AnotherProtocol {
    // åè®®å®žçŽ°å†™åˆ°è¿™é‡Œ
 }
 æ³¨: å¦‚æžœä½ é€šè¿‡æ‰©å±•ä¸ºä¸€ä¸ªå·²æœ‰ç±»åž‹æ·»åŠ æ–°åŠŸèƒ½ï¼Œé‚£ä¹ˆæ–°åŠŸèƒ½å¯¹è¯¥ç±»åž‹çš„æ‰€æœ‰å·²æœ‰å®žä¾‹éƒ½æ˜¯å¯ç”¨çš„ï¼Œå³ä½¿å®ƒä»¬æ˜¯åœ¨è¿™ä¸ªæ‰©å±•å®šä¹‰ä¹‹å‰åˆ›å»ºçš„ã€‚
 */
//2. è®¡ç®—åž‹å±žæ€§
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»åž‹æ·»åŠ è®¡ç®—åž‹å®žä¾‹å±žæ€§å’Œè®¡ç®—åž‹ç±»åž‹å±žæ€§
 */
extension Double {
    var km: Double { return self * 1_000.0 } // è¿™äº›å±žæ€§æ˜¯åªè¯»çš„è®¡ç®—åž‹å±žæ€§ï¼Œä¸ºäº†æ›´ç®€æ´ï¼Œçœç•¥äº† get å…³é”®å­—ã€‚
    var m : Double { return self }
    var cm: Double { return self / 100.0 }
    var mm: Double { return self / 1_000.0 }
    var ft: Double { return self / 3.28084 }
}
let oneInch = 25.4.mm
print("One inch is \(oneInch) meters")
let threeFeet = 3.ft
print("Three feet is \(threeFeet) meters")
let aMarathon = 42.km + 195.m
print("A marathon is \(aMarathon) meters long")
/**
 æ³¨: æ‰©å±•å¯ä»¥æ·»åŠ æ–°çš„è®¡ç®—åž‹å±žæ€§ï¼Œä½†æ˜¯ä¸å¯ä»¥æ·»åŠ å­˜å‚¨åž‹å±žæ€§ï¼Œä¹Ÿä¸å¯ä»¥ä¸ºå·²æœ‰å±žæ€§æ·»åŠ å±žæ€§è§‚å¯Ÿå™¨ã€‚
 */
//3. æž„é€ å™¨
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»åž‹æ·»åŠ æ–°çš„æž„é€ å™¨
 æ‰©å±•èƒ½ä¸ºç±»æ·»åŠ æ–°çš„ä¾¿åˆ©æž„é€ å™¨ï¼Œä½†æ˜¯å®ƒä»¬ä¸èƒ½ä¸ºç±»æ·»åŠ æ–°çš„æŒ‡å®šæž„é€ å™¨æˆ–æžæž„å™¨ã€‚æŒ‡å®šæž„é€ å™¨å’Œæžæž„å™¨å¿…é¡»æ€»æ˜¯ç”±åŽŸå§‹çš„ç±»å®žçŽ°æ¥æä¾›ã€‚
 
 æ³¨: å¦‚æžœä½ ä½¿ç”¨æ‰©å±•ä¸ºä¸€ä¸ªå€¼ç±»åž‹æ·»åŠ æž„é€ å™¨ï¼ŒåŒæ—¶è¯¥å€¼ç±»åž‹çš„åŽŸå§‹å®žçŽ°ä¸­æœªå®šä¹‰ä»»ä½•å®šåˆ¶çš„æž„é€ å™¨ä¸”æ‰€æœ‰å­˜å‚¨å±žæ€§æä¾›äº†é»˜è®¤å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨æ‰©å±•ä¸­çš„æž„é€ å™¨é‡Œè°ƒç”¨é»˜è®¤æž„é€ å™¨å’Œé€ä¸€æˆå‘˜æž„é€ å™¨ã€‚ æ­£å¦‚åœ¨å€¼ç±»åž‹çš„æž„é€ å™¨ä»£ç†ä¸­æè¿°çš„ï¼Œå¦‚æžœä½ æŠŠå®šåˆ¶çš„æž„é€ å™¨å†™åœ¨å€¼ç±»åž‹çš„åŽŸå§‹å®žçŽ°ä¸­ï¼Œä¸Šè¿°è§„åˆ™å°†ä¸å†é€‚ç”¨ã€‚
 */
struct Size {
    var width = 0.0, height = 0.0
}
struct Point {
    var x = 0.0, y = 0.0
}
/**
 å› ä¸ºç»“æž„ä½“ Rect æœªæä¾›å®šåˆ¶çš„æž„é€ å™¨ï¼Œå› æ­¤å®ƒä¼šèŽ·å¾—ä¸€ä¸ªé€ä¸€æˆå‘˜æž„é€ å™¨ã€‚
 åˆå› ä¸ºå®ƒä¸ºæ‰€æœ‰å­˜å‚¨åž‹å±žæ€§æä¾›äº†é»˜è®¤å€¼ï¼Œå®ƒåˆä¼šèŽ·å¾—ä¸€ä¸ªé»˜è®¤æž„é€ å™¨ã€‚
 */
struct Rect {
    var origin = Point()
    var size = Size()
}
let defaultRect = Rect()
let memberwiseRect = Rect(origin: Point(x: 2.0, y: 2.0), size: Size(width: 5.0, height: 5.0))

// å¯ä»¥æä¾›ä¸€ä¸ªé¢å¤–çš„æŽ¥å—æŒ‡å®šä¸­å¿ƒç‚¹å’Œå¤§å°çš„æž„é€ å™¨æ¥æ‰©å±• Rect ç»“æž„ä½“
extension Rect {
    init(center: Point, size: Size) {
        let originX = center.x - size.width/2
        let originY = center.y - size.height/2
        self.init(origin: Point(x:originX, y:originY), size: size)
    }
}
let centerRect = Rect(center: Point(x: 4.0, y: 4.0), size: Size(width: 3.0, height: 3.0))

//4. æ–¹æ³•
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»åž‹æ·»åŠ æ–°çš„å®žä¾‹æ–¹æ³•å’Œç±»åž‹æ–¹æ³•ã€‚
 */

// Int ç±»åž‹æ·»åŠ äº†ä¸€ä¸ªåä¸º repetitions çš„å®žä¾‹æ–¹æ³•
extension Int {
    func repetitions(task: ()->Void) {
        for _ in 0 ..< self {
            task()
        }
    }
}
3.repetitions {
    print("hello")
}

//4.1 å¯å˜å®žä¾‹æ–¹æ³•
/**
 é€šè¿‡æ‰©å±•æ·»åŠ çš„å®žä¾‹æ–¹æ³•ä¹Ÿå¯ä»¥ä¿®æ”¹è¯¥å®žä¾‹æœ¬èº«
 
 ç»“æž„ä½“å’Œæžšä¸¾ç±»åž‹ä¸­ä¿®æ”¹ self æˆ–å…¶å±žæ€§çš„æ–¹æ³•å¿…é¡»å°†è¯¥å®žä¾‹æ–¹æ³•æ ‡æ³¨ä¸º mutatingï¼Œæ­£å¦‚æ¥è‡ªåŽŸå§‹å®žçŽ°çš„å¯å˜æ–¹æ³•ä¸€æ ·ã€‚
 */
extension Int {
    
    mutating func square() {
        self = self * self
    }
}

var someInt = 3
someInt.square()
print(someInt)

//5. ä¸‹æ ‡
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰ç±»åž‹æ·»åŠ æ–°ä¸‹æ ‡ã€‚
 */


/**
 ä¸º Swift å†…å»ºç±»åž‹ Int æ·»åŠ äº†ä¸€ä¸ªæ•´åž‹ä¸‹æ ‡ã€‚è¯¥ä¸‹æ ‡ [n] è¿”å›žåè¿›åˆ¶æ•°å­—ä»Žå³å‘å·¦æ•°çš„ç¬¬ n ä¸ªæ•°å­—ï¼š
 
 123456789[0] è¿”å›ž 9
 123456789[1] è¿”å›ž 8
 */
extension Int {
    subscript (digitIndex: Int) -> Int {
        var decimalBase = 1
        for _ in 0..<digitIndex{
            decimalBase *= 10
        }
        return (self / decimalBase) % 10
    }
}

print(746381295[0])
print(746381295[1])
print(746381295[2])
print(746381295[8])
//å¦‚æžœè¶…å‡ºèŒƒå›´, æ ¹æ®subscriptçš„å®žçŽ°, ä¼šè¿”å›ž0
print(746381295[10])


//6. åµŒå¥—ç±»åž‹
/**
 æ‰©å±•å¯ä»¥ä¸ºå·²æœ‰çš„ç±»ã€ç»“æž„ä½“å’Œæžšä¸¾æ·»åŠ æ–°çš„åµŒå¥—ç±»åž‹ï¼š
 */
extension Int {
    // Kind çš„æžšä¸¾è¡¨ç¤ºç‰¹å®šæ•´æ•°çš„ç±»åž‹
    enum Kind {
        case negative, zero, positive
    }
    
    //è®¡ç®—åž‹å®žä¾‹å±žæ€§kindï¼Œç”¨æ¥æ ¹æ®æ•´æ•°è¿”å›žé€‚å½“çš„ Kind æžšä¸¾æˆå‘˜
    var kind: Kind{
        switch self {
        case 0:
            return .zero
        case let x where x > 0:
            return .positive
        default:
            return .negative
        }
    }
}

func printIntegerKinds(_ numbers: Array<Int>) {
    for number in numbers {
        switch number.kind {
        case .negative:
             print("- ", terminator: "")
        case .positive:
            print("+ ", terminator: "")
        case .zero:
             print("0 ", terminator: "")
        }
    }
    print("")
}
printIntegerKinds([3, 19, -27, 0, -6, 0, 7])
